toyTrackerApp.controller("AuthController",["$scope","$state","authService","usersService","wishlistService",function(e,t,o,i,r){var s=this;s.user={email:"",password:""},s.login=function(){o.auth.$authWithPassword(s.user).then(function(e){t.go("home"),s.userData=e,s.uid=s.userData.uid},function(e){s.error=e})}}]),toyTrackerApp.controller("DashboardController",["$state","authService","$scope","$firebaseArray",function(e,t,o,i){var r=new Firebase("https://toy-tracker-app.firebaseio.com/users/");o.wishlist=i(r)}]),toyTrackerApp.controller("NavController",["$scope","$state","authService","wishlistService",function(e,t,o,i){e.logout=function(){o.auth.$unauth(),t.go("login")},o.auth.$onAuth(function(t){t?e.loggedIn=!0:e.loggedIn=!1})}]),toyTrackerApp.controller("RegisterController",["$scope","$state","authService","usersService","wishlistService",function(e,t,o,i,r){var s=this;s.users=i.users,s.login=function(){o.auth.$authWithPassword(s.user).then(function(e){s.userData=e,s.uid=s.userData.uid,r.uid=s.uid,t.go("home"),o.loggedIn=!0},function(e){s.error=e})},s.register=function(e,t,r,a,n){o.auth.$createUser({email:s.user.email,password:s.user.password}).then(function(e){s.login(),i.createProfile(e.uid,t,r,a,n)},function(e){s.error=e})}}]),toyTrackerApp.controller("SearchController",["$scope","$http","wishlistService","$firebaseArray","$timeout",function(e,t,o,i,r){function s(){e.loading=!0,t.jsonp("http://api.walmartlabs.com/v1/search?apiKey="+e.publicKey+"&query="+e.searchTerm+"&categoryId=4171&facets=on&facet.filter=gender:Boys&numItems=25&sort=bestseller&callback=JSON_CALLBACK").then(function(t){e.toys=t.data.items})["finally"](function(){e.loading=!1})}var a=new Firebase("https://toy-tracker-app.firebaseio.com/users/"+authData.uid);e.wishlist=i(a.child("wishlist"));var n=e.wishlist;e.searchTerm="Action Figure",e.publicKey="bd3q9g624ym5mrk9ad75ntfw",e.loading=!0,e.$watch("searchTerm",function(){s()}),e.addToWishlist=function(t,o,i,s,a){e.addingToy=!0,n.$add({name:t,price:o,onWishlist:i,thumbnailImage:s,reviewImage:a}).then(function(){r(function(){e.addingToy=!1},800)})},e.showModal=!1,e.detailView=function(t){e.toyDetail=t,e.showModal=!0,console.log(e.toyDetail)},e.closeDetailView=function(){e.showModal=!1}}]),toyTrackerApp.controller("ToyController",["toyService","$scope",function(e,t){t.toyDetail=e.clickedToy,console.log(t.toyDetail)}]),toyTrackerApp.controller("WishlistController",["$scope","$firebaseArray","wishlistService","setWishlist",function(e,t,o,i){var r=new Firebase("https://toy-tracker-app.firebaseio.com/users/"+authData.uid);e.wishlist=t(r.child("wishlist")),e.addToWishlist=function(e,t,i,r,s){o.addToWishlist(e,t,i,r,s)},e.removeFromWishlist=function(t){confirm("Are you sure you want to remove this toy?")===!0&&e.wishlist.$remove(t)}}]);