toyTrackerApp.controller("AuthController",["$scope","$state","authService","usersService","wishlistService",function(e,o,t,i,r){var a=this;a.user={email:"",password:""},a.login=function(){t.auth.$authWithPassword(a.user).then(function(e){o.go("home"),a.userData=e,a.uid=a.userData.uid},function(e){a.error=e})}}]),toyTrackerApp.controller("HomeController",["$scope",function(e){console.log(authData)}]),toyTrackerApp.controller("MyToysController",["$scope","$firebaseArray","setMyToys",function(e,o,t){var i=new Firebase("https://toy-tracker-app.firebaseio.com/users/"+authData.uid);e.myToys=o(i.child("my-toys")),e.removeFromWishlist=function(o){confirm("Are you sure you want to remove this toy?")===!0&&e.myToys.$remove(o)}}]),toyTrackerApp.controller("NavController",["$scope","$state","authService","wishlistService",function(e,o,t,i){e.logout=function(){t.auth.$unauth(),o.go("login")},t.auth.$onAuth(function(o){o?e.loggedIn=!0:e.loggedIn=!1})}]),toyTrackerApp.controller("RegisterController",["$scope","$state","authService","usersService","wishlistService",function(e,o,t,i,r){var a=this;a.users=i.users,a.login=function(){t.auth.$authWithPassword(a.user).then(function(e){a.userData=e,a.uid=a.userData.uid,r.uid=a.uid,o.go("home"),t.loggedIn=!0},function(e){a.error=e})},a.register=function(e,o,r,s,n){t.auth.$createUser({email:a.user.email,password:a.user.password}).then(function(e){a.login(),i.createProfile(e.uid,o,r,s,n)},function(e){a.error=e})}}]),toyTrackerApp.controller("SearchController",["$scope","$http","wishlistService","$firebaseArray","$timeout",function(e,o,t,i,r){function a(){e.loading=!0,o.jsonp("http://api.walmartlabs.com/v1/search?apiKey="+e.publicKey+"&query="+e.searchTerm+"&categoryId=4171&facets=on&facet.filter=gender:Boys&numItems=25&sort=bestseller&callback=JSON_CALLBACK").then(function(o){e.toys=o.data.items})["finally"](function(){e.loading=!1})}var s=new Firebase("https://toy-tracker-app.firebaseio.com/users/"+authData.uid);e.wishlist=i(s.child("wishlist"));var n=e.wishlist;e.myToys=i(s.child("my-toys"));var c=e.myToys;e.searchTerm="Action Figure",e.publicKey="bd3q9g624ym5mrk9ad75ntfw",e.loading=!0,e.$watch("searchTerm",function(){a()}),e.addToWishlist=function(o,t,i,a,s){e.addingToy=!0,n.$add({name:o,price:t,itemId:i,thumbnailImage:a,reviewImage:s}).then(function(){r(function(){e.addingToy=!1},800)})},e.detailView=function(o){e.toyDetail=o,e.featImage=e.toyDetail.largeImage,e.showModal=!0,console.log(o)},e.closeDetailView=function(){e.showModal=!1},e.showImage=function(o){e.featImage=o.largeImage},e.addToMyToys=function(o,t,i,a,s){e.haveToy=!0,c.$add({name:o,price:t,itemId:i,thumbnailImage:a,reviewImage:s}).then(function(){r(function(){e.haveToy=!1},800)})}}]),toyTrackerApp.controller("ToyController",["toyService","$scope",function(e,o){o.toyDetail=e.clickedToy}]),toyTrackerApp.controller("UsersController",["$scope","$firebaseObject","setProfile","usersService",function(e,o,t,i){var r=new Firebase("https://toy-tracker-app.firebaseio.com/users/"+authData.uid);e.profile=o(r.child("profile")),e.editMode=!1,e.saveProfile=function(){e.profile.$save().then(function(e){alert("Your profile has been saved!")}),e.editMode=!1},e.editProfile=function(){e.editMode=!0}}]),toyTrackerApp.controller("WishlistController",["$scope","$firebaseArray","wishlistService","setWishlist","$timeout",function(e,o,t,i,r){var a=new Firebase("https://toy-tracker-app.firebaseio.com/users/"+authData.uid);e.wishlist=o(a.child("wishlist")),e.myToys=o(a.child("my-toys"));var s=e.myToys;e.addToWishlist=function(e,o,i,r,a){t.addToWishlist(e,o,i,r,a)},e.removeFromWishlist=function(o){confirm("Are you sure you want to remove this toy?")===!0&&e.wishlist.$remove(o)},e.addToMyToys=function(o,t,i,a,n,c){e.haveToy=!0,s.$add({name:o,price:t,itemId:i,thumbnailImage:a,reviewImage:n}).then(function(){r(function(){e.haveToy=!1},800)}),e.wishlist.$remove(c)}}]);